<ng-template #loggedOut> S'il vous plait login. </ng-template>
<div *ngIf="isLoggedIn" class="container mt-3">
  <div class="main-content text-center">
    <div class="row align-self-center">
      <div class="col-md-4 text-center company__info box">
        <div class="ml-5 align-self-center">
          <span><img class="img-responsive" style="border-radius: 25px" src="../../assets/images/carte.png" /></span>
        </div>
      </div>
      <div class="col-md-8 col-xs-12 col-sm-12 login_form">
        <div class="card text-center" style="color: #2a9d8f; padding: 20px">
          <div class="panel panel-primary container-fluid">
            <div class="panel-heading">
              <h1><strong>My profile</strong></h1>
              <hr />
              <br />
            </div>
            <div class="panel-body">
              <div class="container" style="color: #04352e" *ngIf="currentUser; else loggedOut">
                <form class="form-group animate__animated animate__backInDown">
                  <div class="form-group" style="color: #04352e; width: 90%">
                    <label for="name">Lastname : </label>
                    <input type="text" class="form__input" id="family_name" required [(ngModel)]="user.family_name"
                      name="family_name" [class.is-invalid]="
                        family_name.invalid && family_name.touched
                      " minlength="3" maxlength="20" pattern="^[a-z]+" #family_name="ngModel" />
                    <div *ngIf="
                        family_name.errors &&
                        family_name.invalid &&
                        family_name.touched
                      ">
                      <small class="text-danger" *ngIf="family_name.errors?.['required']">Lastname required</small>
                      <small class="text-danger"
                        *ngIf="family_name.errors?.['minlength'] || family_name.errors?.['maxlength']">Lastname should
                        contain between 3 and 20
                        caracters</small>
                      <small class="text-danger" *ngIf="family_name.errors?.['pattern']">Invalid lastname, it should
                        contain only caracters
                        <br />
                      </small>
                    </div>

                    <label for="name">Fisrtname :</label>
                    <input type="text" class="form__input" id="first_name" required [(ngModel)]="user.first_name"
                      name="first_name" [class.is-invalid]="
                        first_name.invalid && first_name.touched
                      " minlength="3" maxlength="20" pattern="^[a-z]+" #first_name="ngModel" />
                    <div *ngIf="
                        first_name.errors &&
                        first_name.invalid &&
                        first_name.touched
                      ">
                      <small class="text-danger" *ngIf="first_name.errors?.[ 'required'] ">Fisrtname required</small>
                      <small class="text-danger"
                        *ngIf="first_name.errors?.['minlength'] || first_name.errors?.['maxlength']">Fisrstname should
                        contain between 3 and 20
                        caracters</small>
                      <small class="text-danger" *ngIf="first_name.errors?.['pattern']">Invalid firstname, it should
                        contain only caracters
                        <br />
                      </small>
                    </div>

                    <label for="name">Email :</label>
                    <input type="text" class="form__input" id="email" required [(ngModel)]="user.email" name="email"
                      email #email="ngModel" required [class.is-invalid]="email.invalid && email.touched"
                      pattern=".+@gmail+\.com" minlength="18" maxlength="52" />
                    <div *ngIf="email.errors && email.invalid && email.touched">
                      <small class="text-danger" *ngIf="email.errors?.['required']">Email required</small>
                      <small class="text-danger" *ngIf="email.errors?.['pattern']">Invalid Email</small>
                      <small class="text-danger"
                        *ngIf="email.errors?.['minlength'] || email.errors?.['maxlength']">Email should contain between
                        18 and 52 caracters</small>
                    </div>
                    <label for="name">Mobile :</label>
                    <input type="number" [(ngModel)]="user.mobile" name="mobile" id="mobile" placeholder="Mobile"
                      class="form__input" required #mobile="ngModel"
                      [class.is-invalid]="mobile.invalid && mobile.touched" maxlength="8" min="0" pattern="^[0-9]+" />
                    <div *ngIf="mobile.errors && mobile.invalid && mobile.touched">
                      <small class="text-danger" *ngIf="mobile.errors?.['required']">Mobile required</small>
                    </div>
                  </div>
                </form>

                <br />
                <button data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="updateUser()"
                  class="btn btn-outline-info btn-default">
                  Modify
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!isLoggedIn" class="container mt-4">
    <div class="card text-center" style="padding: 20px">
      <h1>
        <Strong>welcome to Shopppini</Strong>
      </h1>
      <img class="img-responsive" style="width: min-content; height: min-content" src="../../assets/images/shopping.png"
        alt=" " />
    </div>
  </div>
</div>